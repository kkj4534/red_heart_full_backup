You are operating as a coding assistant in Anthropic Claude 4 with Extended Thinking and Plan Mode activated. 
I am providing you with the following development task, requiring careful design, planning, and generation of production-ready Python code.

Context:
I am developing an ethical AI backend system named "Red Heart", consisting of modular components including:
- Emotion analysis module
- Bayesian regret analysis module
- SURD analyzer
- Bentham utilitarian calculator
- XAI feedback logger
- Modular semantic analyzer

This system currently lacks:
1. A **self-reflection and empathy module** that builds upon the existing hierarchical emotion analyzer, designed to:
    - Analyze self-oriented emotional states
    - Simulate empathy by predicting the emotional state of others
    - Integrate seamlessly with utilitarian calculus (outputting normalized scores)

2. A **multi-level semantic expression module** that adds:
    - Hierarchical semantic layers for interpretation (surface meaning, ethical meaning, causal meaning, emotional meaning)
    - Outputs interpretable semantic layers as structured objects, JSON schema or hierarchical data structures.

Your task:
- Plan and write clean, modular, production-quality Python code for both modules
- Ensure compatibility with existing Red Heart system architecture (modular, async-capable, utilitarian scoring aware)
- Follow clear separation of concerns
- Provide testable and extensible interfaces

Output:
- Plan summary
- Well-structured code
- Comments explaining the design and functionality


ì¶”ê°€ ëŒ€í™” ë‚´ìš©
2ï¸âƒ£ Self-reflection & empathy simulation

í˜„ì¬ systemì€ "decision auditing" + "emotion impact weighting"ì€ ìˆìŒ â†’ ì—¬ê¸°ì— "self-reflection/empathy layer" framing ì¶”ê°€ëŠ” ê°€ëŠ¥.

ğŸ’¡ ë°©ë²•:

self-reflection framing:

í˜„ì¬ regret analysis module output + SURD output â†’
â€œìì‹ ì˜ judgmentì— ëŒ€í•œ confidence, regret-based hindsight metricâ€ìœ¼ë¡œ ë¦¬í¬íŠ¸.

empathy framing:

ê°ì • analyzer output + ë²¤ë‹´ calculator result â†’
â€œíƒ€ì¸ perspective ë¶„ì„â€ìœ¼ë¡œ post-process.


3ï¸âƒ£ ë‹¤ì¤‘ìˆ˜ì¤€ ì˜ë¯¸ë¡ ì  í‘œí˜„

í˜„ì¬ semantic analyzer êµ¬ì¡°ì—ì„œ â€œsingle layer ì˜ë¯¸ í•´ì„â€ì€ êµ¬í˜„ë¨.

multi-levelë¡œ í™•ì¥í•˜ë ¤ë©´:

í‘œë©´ ì˜ë¯¸ â†’ ë„ë•/ê°ì •ì  ì˜ë¯¸ â†’ causal semantic ì—°ê²°
ì´ ê³„ì¸µì  processing ì„¤ê³„ í•„ìš”.

ğŸ’¡ ë°©ë²•:

ê¸°ì¡´ analyzer outputì„ MultiLevelSemanticAnalyzer styleë¡œ wrapí•˜ë©´ prototype ê°€ëŠ¥.

ë‹¨ìˆœíˆ post-processingìœ¼ë¡œ â€œoutput interpretation ë ˆì´ì–´â€ë¥¼ ê³„ì¸µí™”í•œ framing



ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡
You are operating as a coding assistant in Anthropic Claude 4 with Extended Thinking and Plan Mode enabled. 
Your task is to implement and integrate the following enhancements into an existing ethical AI backend system called "Red Heart".

Context:
Red Heart consists of:
- Hierarchical emotion analysis system
- Multi-level semantic analyzer
- Bayesian regret system
- SURD uncertainty analyzer
- Modular utilitarian (Bentham-style) calculator
- XAI feedback logger

Objectives:

1ï¸âƒ£ Expand empathy learning workflow into a fully structured "self-other-community" phased architecture:
- Refine emotion system classes to support empathy learning at individual (self), interpersonal (other), and communal levels.
- Ensure empathy simulation outputs are normalized and utilitarian-compatible.

2ï¸âƒ£ Enhance multi-level semantic analyzer to support hashtag-based hierarchical semantic structuring:
- Add hashtag tagging functionality to semantic layer outputs.
- Structure semantic output as a hierarchical, JSON-compliant object.

3ï¸âƒ£ Increase SURD analyzer integration:
- Ensure that uncertainty/confidence metrics influence both empathy learning and semantic interpretation layers.
- Propagate SURD output into downstream decision auditing.

4ï¸âƒ£ Philosophical framework extensions:
- Add modular placeholders and stubs for supporting ethical reasoning from:
  - Existentialism
  - Communitarianism
  - Anti-fascism
  - Individualism
  - Capitalism
  - Erich Frommâ€™s â€œTo Have or To Beâ€ ethical dichotomy.

5ï¸âƒ£ Design the system so that additional philosophical frameworks can be easily integrated in the future:
- Ensure modularity and separation of concerns.
- Maintain GPU-aware configuration and async-capable interfaces.

Output requirements:
- Plan summary before code.
- Production-quality, Python 3.9+ compatible code.
- Thorough comments explaining all classes, methods, and integration points.
- Clear interfaces for downstream modules to query empathy, semantic layers, and ethical framework outputs.

Constraints:
- Ensure full compatibility with Red Heartâ€™s existing modular architecture.
- Prioritize performance and maintainability.
- Design API signatures consistent with Red Heartâ€™s current style.

