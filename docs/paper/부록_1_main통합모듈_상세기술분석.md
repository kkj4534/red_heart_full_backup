# \ubd80\ub85d 1: Main.py \ud1b5\ud569 \ubaa8\ub4c8 \uc0c1\uc138 \uae30\uc220 \ubd84\uc11d

## 1. \uac1c\uc694

Red Heart AI \uc2dc\uc2a4\ud15c\uc758 \uc911\ucd94\uc2e0\uacbd\uacc4\ub77c \ud560 \uc218 \uc788\ub294 main.py\ub294 \ucd1d 10\uac1c \uc774\uc0c1\uc758 \uace0\uae09 AI \ubaa8\ub4c8\uc744 \uc720\uae30\uc801\uc73c\ub85c \ud1b5\ud569\ud558\uc5ec \uc6b4\uc601\ud558\ub294 \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\ud130 \uc5ed\ud560\uc744 \uc218\ud589\ud569\ub2c8\ub2e4. \uc774 \ud30c\uc77c\uc740 \ub2e8\uc21c\ud55c \uc5d4\ud2b8\ub9ac \ud3ec\uc778\ud2b8\uac00 \uc544\ub2c8\ub77c, \ubcf5\uc7a1\ud55c \ube44\ub3d9\uae30 \ucc98\ub9ac, \uba54\ubaa8\ub9ac \uad00\ub9ac, \uce90\uc2f1, \uc131\ub2a5 \ucd5c\uc801\ud654\ub97c \ubaa8\ub450 \uad00\uc7a5\ud558\ub294 \uc2dc\uc2a4\ud15c \ud5c8\ube0c\uc785\ub2c8\ub2e4.

## 2. \ud575\uc2ec \ud074\ub798\uc2a4: RedHeartSystem

### 2.1 \uc2dc\uc2a4\ud15c \uc544\ud0a4\ud14d\ucc98

RedHeartSystem \ud074\ub798\uc2a4\ub294 203\ubc88 \ub77c\uc778\ubd80\ud130 \uc2dc\uc791\ub418\uba70, \ub2e4\uc74c\uacfc \uac19\uc740 \uacc4\uce35\uc801 \uad6c\uc870\ub97c \uac00\uc9d1\ub2c8\ub2e4:

**1\ub2e8\uacc4 - \uae30\ubcf8 \ubd84\uc11d\uae30 \ub808\uc774\uc5b4**
- emotion_analyzer: \uace0\uae09 \uac10\uc815 \ubd84\uc11d\uae30
- bentham_calculator: \uace0\uae09 \ubca4\ub2f4 \uc724\ub9ac \uacc4\uc0b0\uae30
- semantic_analyzer: \uace0\uae09 \uc758\ubbf8 \ubd84\uc11d\uae30
- surd_analyzer: \uace0\uae09 SURD \uc815\ubcf4 \ubd84\ud574 \ubd84\uc11d\uae30

**2\ub2e8\uacc4 - \uace0\uae09 \uc2dc\uc2a4\ud15c \ub808\uc774\uc5b4**
- hierarchical_emotion_system: 3\ub2e8\uacc4 \uacc4\uce35\uc801 \uac10\uc815 \uc2dc\uc2a4\ud15c
- regret_learning_system: \ud6c4\ud68c \uae30\ubc18 \ud559\uc2b5 \uc2dc\uc2a4\ud15c
- bayesian_inference: \ubca0\uc774\uc9c0\uc548 \ucd94\ub860 \ubaa8\ub4c8
- llm_integration_layer: LLM \ud1b5\ud569 \ub808\uc774\uc5b4
- counterfactual_reasoning: \ubc18\uc0ac\uc2e4 \ucd94\ub860 \uc2dc\uc2a4\ud15c

**3\ub2e8\uacc4 - \ud1b5\ud569 \uc870\uc728 \ub808\uc774\uc5b4**
- module_coordinator: \ubaa8\ub4c8 \ube0c\ub9ac\uc9c0 \ucf54\ub514\ub124\uc774\ud130 (\ub77c\uc778 227, \ud575\uc2ec \ud1b5\ud569 \ucef4\ud3ec\ub10c\ud2b8)
- experience_database: \uacbd\ud5d8 \uba54\ubaa8\ub9ac \ub370\uc774\ud130\ubca0\uc774\uc2a4
- thread_pool: ThreadPoolExecutor (4\uac1c \uc6cc\ucee4 \uc2a4\ub808\ub4dc, \ub77c\uc778 231)

### 2.2 \ucd08\uae30\ud654 \ud504\ub85c\uc138\uc2a4 (248-313\ubc88 \ub77c\uc778)

\uc2dc\uc2a4\ud15c \ucd08\uae30\ud654\ub294 \ube44\ub3d9\uae30\uc801\uc73c\ub85c \uc9c4\ud589\ub418\uba70, \ub2e4\uc74c\uacfc \uac19\uc740 \uc815\uad50\ud55c \ub2e8\uacc4\ub97c \uac70\uce69\ub2c8\ub2e4:

**\ub2e8\uacc4 1: \uc911\ubcf5 \ucd08\uae30\ud654 \ubc29\uc9c0 (\ub77c\uc778 250-253)**
```python
with self.initialization_lock:
    if self.is_initialized:
        return
```
\uc2a4\ub808\ub4dc \uc548\uc804\uc131\uc744 \uc704\ud55c \ub77d\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc911\ubcf5 \ucd08\uae30\ud654\ub97c \ubc29\uc9c0\ud569\ub2c8\ub2e4.

**\ub2e8\uacc4 2: \uc758\uc874\uc131 \uac80\uc99d (\ub77c\uc778 258-263)**
dependency_validator\ub97c \ud1b5\ud574 \ubaa8\ub4e0 \ud544\uc218 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc640 \ubaa8\ub378 \ud30c\uc77c\uc758 \uc874\uc7ac\ub97c \uac80\uc99d\ud569\ub2c8\ub2e4.

**\ub2e8\uacc4 3: \ud558\ub4dc\uc6e8\uc5b4 \ub9ac\uc18c\uc2a4 \ud655\uc778 (\ub77c\uc778 329-332)**
GPU/CUDA \uac00\uc6a9\uc131\uc744 \uccb4\ud06c\ud558\uace0, \uc0ac\uc6a9 \uac00\ub2a5\ud55c \uba54\ubaa8\ub9ac\ub97c \uacc4\uc0b0\ud569\ub2c8\ub2e4:
```python
memory_allocated = torch.cuda.memory_allocated(0) / 1024**3
memory_cached = torch.cuda.memory_reserved(0) / 1024**3
```

**\ub2e8\uacc4 4: \ubcd1\ub82c \ucd08\uae30\ud654 (\ub77c\uc778 268-281, 287-295)**
10\uac1c\uc758 \ubaa8\ub4c8\uc744 asyncio.gather\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub3d9\uc2dc\uc5d0 \ucd08\uae30\ud654\ud569\ub2c8\ub2e4. 60\ucd08 \ud0c0\uc784\uc544\uc6c3\uc774 \uc124\uc815\ub418\uc5b4 \ubb34\ud55c \ub300\uae30\ub97c \ubc29\uc9c0\ud569\ub2c8\ub2e4.

**\ub2e8\uacc4 5: \ubaa8\ub4c8 \ub4f1\ub85d (\ub77c\uc778 301)**
\ucd08\uae30\ud654\ub41c \ubaa8\ub4e0 \ubaa8\ub4c8\uc744 ModuleBridgeCoordinator\uc5d0 \ub4f1\ub85d\ud569\ub2c8\ub2e4. \uac01 \ubaa8\ub4c8\uc740 \ud45c\uc900\ud654\ub41c \uc5b4\ub311\ud130\ub85c \ub798\ud551\ub418\uc5b4 \ud1b5\uc77c\ub41c \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.

**\ub2e8\uacc4 6: \ud1b5\ud569 \ud14c\uc2a4\ud2b8 (\ub77c\uc778 304)**
\uc2dc\uc2a4\ud15c \uc804\uccb4\uc758 \uc5f0\ub3d9\uc744 \ud655\uc778\ud558\ub294 \uac04\ub2e8\ud55c \ud14c\uc2a4\ud2b8\ub97c \uc2e4\ud589\ud558\uc5ec \ubaa8\ub4e0 \ucef4\ud3ec\ub10c\ud2b8\uac00 \uc62c\ubc14\ub974\uac8c \ud1b5\uc2e0\ud560 \uc218 \uc788\ub294\uc9c0 \uac80\uc99d\ud569\ub2c8\ub2e4.

### 2.3 \uac1c\ubcc4 \ubaa8\ub4c8 \ucd08\uae30\ud654 \uba54\uc11c\ub4dc

**\uac10\uc815 \ubd84\uc11d\uae30 \ucd08\uae30\ud654 (\ub77c\uc778 340-355)**
```python
async def _init_emotion_analyzer(self):
    from advanced_emotion_analyzer import AdvancedEmotionAnalyzer
    self.emotion_analyzer = AdvancedEmotionAnalyzer()
    await self.emotion_analyzer.initialize()
```

**\ubca4\ub2f4 \uacc4\uc0b0\uae30 \ucd08\uae30\ud654 (\ub77c\uc778 357-372)**
```python
async def _init_bentham_calculator(self):
    from advanced_bentham_calculator import AdvancedBenthamCalculator
    self.bentham_calculator = AdvancedBenthamCalculator()
    await self.bentham_calculator.initialize()
```

**\uacbd\ud5d8 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ucd08\uae30\ud654 (\ub77c\uc778 402-412)**
\uacbd\ud5d8 DB\ub294 \uc120\ud0dd\uc801\uc73c\ub85c \ucd08\uae30\ud654\ub418\uba70, \uc801\uc7ac\uc5d0 \uc2e4\ud328\ud558\uba74 \uc2dc\uc2a4\ud15c\uc740 DB \uc5c6\uc774\ub3c4 \uc791\ub3d9\ud560 \uc218 \uc788\ub3c4\ub85d \uc124\uacc4\ub418\uc5c8\uc2b5\ub2c8\ub2e4.

## 3. \ubd84\uc11d \ud30c\uc774\ud504\ub77c\uc778

### 3.1 \ud1b5\ud569 \ubd84\uc11d \uba54\ucee4\ub2c8\uc998 (572-633\ubc88 \ub77c\uc778)

analyze_with_bridge_coordinator \uba54\uc11c\ub4dc\ub294 \uc2dc\uc2a4\ud15c\uc758 \ud575\uc2ec \ucc98\ub9ac \ud568\uc218\ub85c, \ub2e4\uc74c\uacfc \uac19\uc740 \uc815\uad50\ud55c \ucc98\ub9ac \uacfc\uc815\uc744 \uac70\uce69\ub2c8\ub2e4:

**\ucd08\uae30\ud654 \ud655\uc778 (\ub77c\uc778 574-575)**
```python
if not self.is_initialized:
    await self.initialize()
```

**\ud65c\uc131\ud654\ub41c \ubaa8\ub4c8 \uacb0\uc815 (\ub77c\uc778 586-594)**
AnalysisRequest\uc758 \ud50c\ub798\uadf8\uc5d0 \ub530\ub77c \ud544\uc694\ud55c \ubd84\uc11d\uae30\ub9cc \uc120\ud0dd\uc801\uc73c\ub85c \ud65c\uc131\ud654\ud569\ub2c8\ub2e4:
```python
enabled_modules = []
if request.include_emotion and ModuleType.EMOTION in self.module_coordinator.adapters:
    enabled_modules.append(ModuleType.EMOTION)
```

**\ube0c\ub9ac\uc9c0 \ucf54\ub514\ub124\uc774\ud130 \ud1b5\ud55c \ud1b5\ud569 \ubd84\uc11d (\ub77c\uc778 600-603)**
```python
bridge_results = await self.module_coordinator.integrated_analysis(
    input_text=request.text,
    enable_modules=enabled_modules
)
```

**\uacb0\uacfc \ud328\ud0a4\uc9d5 (\ub77c\uc778 616-625)**
\uacb0\uacfc\ub294 XAI \uc124\uba85, \uc131\ub2a5 \ub9ac\ud3ec\ud2b8, \ud1b5\ud569 \ud488\uc9c8 \ud3c9\uac00\ub97c \ud3ec\ud568\ud558\uc5ec \ud3ec\uad04\uc801\uc778 \ud615\ud0dc\ub85c \ubc18\ud658\ub429\ub2c8\ub2e4.

### 3.2 \ube44\ub3d9\uae30 \ubd84\uc11d \uba54\ucee4\ub2c8\uc998 (704-759\ubc88 \ub77c\uc778)

analyze_async \uba54\uc11c\ub4dc\ub294 \uae30\uc874 \ube44\ub3d9\uae30 \ubd84\uc11d\uc744 \uc9c0\uc6d0\ud569\ub2c8\ub2e4:

**\uce90\uc2f1 \uba54\ucee4\ub2c8\uc998 (\ub77c\uc778 712-718)**
```python
cache_key = self._generate_cache_key(request)
cached_result = self._get_cached_result(cache_key)
if cached_result:
    self.performance_stats['cache_hits'] += 1
    return cached_result
```

**\ubcd1\ub82c \ubd84\uc11d \uc2e4\ud589 (\ub77c\uc778 722-734)**
```python
analysis_tasks = []
if request.include_emotion and self.emotion_analyzer:
    analysis_tasks.append(self._analyze_emotion_async(request))
# ... \uae30\ud0c0 \ubaa8\ub4c8\ub4e4
analysis_results = await asyncio.gather(*analysis_tasks, return_exceptions=True)
```

**\uc5d0\ub7ec \ucc98\ub9ac (\ub77c\uc778 747-759)**
```python
except Exception as e:
    self.performance_stats['failed_analyses'] += 1
    return IntegratedResult(
        request=request,
        recommendation="\ubd84\uc11d \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.",
        confidence=0.0,
        processing_time=time.time() - start_time,
        metadata={'error': str(e)}
    )
```

### 3.3 \ubaa8\ub4c8\ubcc4 \ubd84\uc11d \uba54\uc11c\ub4dc

**\uac10\uc815 \ubd84\uc11d (\ub77c\uc778 761-772)**
\ud14d\uc2a4\ud2b8\ub97c AdvancedEmotionAnalyzer\uc5d0 \uc804\ub2ec\ud558\uc5ec 7\uac1c \uae30\ubcf8 \uac10\uc815\uacfc 28\uac1c \ud558\uc704 \uac10\uc815\uc744 \ucd94\ucd9c\ud569\ub2c8\ub2e4. \uc5b8\uc5b4\uc640 \ucee8\ud14d\uc2a4\ud2b8 \uc815\ubcf4\uac00 \ud568\uaed8 \uc804\ub2ec\ub418\uc5b4 \ubb38\ud654\uc801 \ub274\uc559\uc2a4\ub97c \uace0\ub824\ud569\ub2c8\ub2e4.

**\ubca4\ub2f4 \ubd84\uc11d (\ub77c\uc778 774-809)**
\ud2b9\ud788 \uc8fc\ubaa9\ud560 \uc810\uc740 \uacbd\ud5d8 \uba54\ubaa8\ub9ac \ud1b5\ud569\uc785\ub2c8\ub2e4:
```python
if self.experience_database:
    result = await self.bentham_calculator.calculate_with_experience_integration(
        bentham_data, self.experience_database
    )
```
\uacfc\uac70 \ud310\ub2e8\uc744 \ucc38\uc870\ud558\uc5ec \ub354 \uc77c\uad00\ub41c \uc724\ub9ac\uc801 \ud3c9\uac00\ub97c \uc218\ud589\ud569\ub2c8\ub2e4.

**\uc758\ubbf8 \ubd84\uc11d (\ub77c\uc778 811-822)**
\ud14d\uc2a4\ud2b8\uc758 \uc2ec\uce35 \uc758\ubbf8\ub97c \ubd84\uc11d\ud558\uc5ec \uc228\uaca8\uc9c4 \uc758\ub3c4, \uac10\uc815\uc801 \ub274\uc559\uc2a4, \ubb38\ub9e5\uc801 \ud568\uc758\ub97c \ucd94\ucd9c\ud569\ub2c8\ub2e4.

**SURD \ubd84\uc11d (\ub77c\uc778 824-838)**
\uc815\ubcf4\ub97c Synergistic, Unique, Redundant, Deterministic \uc694\uc18c\ub85c \ubd84\ud574\ud558\uc5ec \uc758\uc0ac\uacb0\uc815\uc5d0 \ud544\uc694\ud55c \ud575\uc2ec \uc815\ubcf4\ub97c \uc2dd\ubcc4\ud569\ub2c8\ub2e4.

## 4. \ud1b5\ud569 \ubc0f \uc870\uc728

### 4.1 ModuleBridgeCoordinator \uc5f0\ub3d9

\ubaa8\ub4c8 \ube0c\ub9ac\uc9c0 \ucf54\ub514\ub124\uc774\ud130\ub294 \uac01 \ubaa8\ub4c8\uc758 \ucd9c\ub825\uc744 \ud45c\uc900\ud654\ub41c \ud615\uc2dd\uc73c\ub85c \ubcc0\ud658\ud558\uace0, \ubaa8\ub4c8 \uac04 \ub370\uc774\ud130 \ud750\ub984\uc744 \uad00\ub9ac\ud569\ub2c8\ub2e4.

**\ub370\uc774\ud130 \ubcc0\ud658 \ud30c\uc774\ud504\ub77c\uc778**
\uac01 \ubaa8\ub4c8\uc758 \uace0\uc720\ud55c \ucd9c\ub825 \ud615\uc2dd\uc744 ModuleOutput \ud45c\uc900 \ud615\uc2dd\uc73c\ub85c \ubcc0\ud658\ud569\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \ubaa8\ub4c8 \uac04 \ud638\ud658\uc131\uc744 \ubcf4\uc7a5\ud569\ub2c8\ub2e4.

**\uc131\ub2a5 \ubaa8\ub2c8\ud130\ub9c1**
\uac01 \ubaa8\ub4c8\uc758 \ucc98\ub9ac \uc2dc\uac04, \uc131\uacf5\ub960, \ud3c9\uade0 \uc2e0\ub8b0\ub3c4\ub97c \uc2e4\uc2dc\uac04\uc73c\ub85c \ucd94\uc801\ud569\ub2c8\ub2e4.

**\uc801\uc751\ud615 \ub77c\uc6b0\ud305**
\ubaa8\ub4c8\uc758 \uc131\ub2a5\uc774 \uc800\ud558\ub418\uba74 \uc790\ub3d9\uc73c\ub85c \ubc31\uc5c5 \uacbd\ub85c\ub97c \ud65c\uc131\ud654\ud558\uac70\ub098 \ucc98\ub9ac \uc6b0\uc120\uc21c\uc704\ub97c \uc870\uc815\ud569\ub2c8\ub2e4.

### 4.2 \uacb0\uacfc \ud1b5\ud569 \uc54c\uace0\ub9ac\uc998 (870-912\ubc88 \ub77c\uc778)

**\ud1b5\ud569 \uc810\uc218 \uacc4\uc0b0 (\ub77c\uc778 914-937)**
```python
weights = {
    'emotion': 0.25,    # 25%
    'bentham': 0.35,    # 35% (\uac00\uc7a5 \ub192\uc740 \uac00\uc911\uce58)
    'semantic': 0.20,   # 20%
    'surd': 0.20        # 20%
}
```
\uac01 \ubaa8\ub4c8\uc758 \uacb0\uacfc\uc5d0 \uac00\uc911\uce58\ub97c \uc801\uc6a9\ud558\uc5ec \ucd5c\uc885 \uc810\uc218\ub97c \uc0b0\ucd9c\ud569\ub2c8\ub2e4. \ubca4\ub2f4 \uc724\ub9ac \uacc4\uc0b0\uc774 \uac00\uc7a5 \ub192\uc740 \uac00\uc911\uce58(35%)\ub97c \ubc1b\ub294 \uac83\uc740 \uc724\ub9ac\uc801 \uace0\ub824\uc0ac\ud56d\uc774 \uc2dc\uc2a4\ud15c\uc758 \ud575\uc2ec\uc784\uc744 \ubc18\uc601\ud569\ub2c8\ub2e4.

**\ucd94\ucc9c \uc0dd\uc131**
\ud1b5\ud569 \uc810\uc218\uc640 \uac1c\ubcc4 \ubaa8\ub4c8 \uacb0\uacfc\ub97c \ubc14\ud0d5\uc73c\ub85c \uc0ac\uc6a9\uc790\uc5d0\uac8c \uc81c\uacf5\ud560 \ucd94\ucc9c\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4. \uc774\ub54c \uc724\ub9ac\uc801 \uace0\ub824\uc0ac\ud56d\uc774 \ucd5c\uc6b0\uc120\uc73c\ub85c \ubc18\uc601\ub429\ub2c8\ub2e4.

**\uc2e0\ub8b0\ub3c4 \ud3c9\uac00**
\uc804\uccb4 \uc2dc\uc2a4\ud15c\uc758 \uc2e0\ub8b0\ub3c4\ub294 \uac1c\ubcc4 \ubaa8\ub4c8 \uc2e0\ub8b0\ub3c4\uc758 \uc870\ud654 \ud3c9\uade0\uc73c\ub85c \uacc4\uc0b0\ub418\uba70, \ubaa8\ub4c8 \uac04 \uc77c\uce58\ub3c4\uac00 \ub0ae\uc744\uc218\ub85d \uc2e0\ub8b0\ub3c4\uac00 \uac10\uc18c\ud569\ub2c8\ub2e4.

## 5. \uc131\ub2a5 \ucd5c\uc801\ud654 \uae30\ubc95

### 5.1 \uce90\uc2f1 \uc2dc\uc2a4\ud15c (1032-1055\ubc88 \ub77c\uc778)

**\uce90\uc2dc \ud0a4 \uc0dd\uc131 (\ub77c\uc778 1032-1040)**
```python
def _generate_cache_key(self, request: AnalysisRequest) -> str:
    key_data = f"{request.text}_{request.language}_{request.scenario_type}"
    key_data += f"_{request.include_emotion}_{request.include_bentham}"
    return hashlib.md5(key_data.encode()).hexdigest()
```

**\uce90\uc2dc \uc870\ud68c \ubc0f \uc800\uc7a5 (\ub77c\uc778 1042-1055)**
```python
def _get_cached_result(self, cache_key: str) -> Optional[IntegratedResult]:
    with self.cache_lock:
        return self.result_cache.get(cache_key)

def _cache_result(self, cache_key: str, result: IntegratedResult):
    with self.cache_lock:
        if len(self.result_cache) >= 100:  # \uce90\uc2dc \ud06c\uae30 \uc81c\ud55c
            oldest_key = next(iter(self.result_cache))
            del self.result_cache[oldest_key]
        self.result_cache[cache_key] = result
```

**\ub2e4\ub2e8\uacc4 \uce90\uc2dc**
- L1: \ucd5c\uadfc 100\uac1c \uc694\uccad\uc758 \uc804\uccb4 \uacb0\uacfc \uce90\uc2f1
- L2: \uac1c\ubcc4 \ubaa8\ub4c8 \uacb0\uacfc\uc758 \ubd80\ubd84 \uce90\uc2f1
- L3: \uc784\ubca0\ub529 \ubc0f \uc911\uac04 \ud45c\ud604\uc758 \uc7a5\uae30 \uce90\uc2f1

### 5.2 \uba54\ubaa8\ub9ac \uad00\ub9ac

**GPU \uba54\ubaa8\ub9ac \ubaa8\ub2c8\ud130\ub9c1 (\ub77c\uc778 329-332)**
```python
if torch.cuda.is_available():
    memory_allocated = torch.cuda.memory_allocated(0) / 1024**3
    memory_cached = torch.cuda.memory_reserved(0) / 1024**3
    self.logger.info(f"GPU \uba54\ubaa8\ub9ac: \ud560\ub2f9\ub428 {memory_allocated:.2f}GB, \uce90\uc2dc\ub428 {memory_cached:.2f}GB")
```

**\ub3d9\uc801 \ubc30\uce58 \ud06c\uae30 \uc870\uc815**
OOM(Out of Memory) \uc704\ud5d8\uc774 \uac10\uc9c0\ub418\uba74 \uc790\ub3d9\uc73c\ub85c \ubc30\uce58 \ud06c\uae30\ub97c \uc904\uc5ec \ucc98\ub9ac\ub97c \uacc4\uc18d\ud569\ub2c8\ub2e4.

**\uce90\uc2dc \uc815\ub9ac (\ub77c\uc778 1252-1270)**
```python
def clear_cache(self):
    with self.cache_lock:
        self.result_cache.clear()
    
    # \uac01 \ubd84\uc11d\uae30\uc758 \uce90\uc2dc\ub3c4 \ud074\ub9ac\uc5b4
    if self.emotion_analyzer:
        self.emotion_analyzer.clear_cache()
```

### 5.3 \ube44\ub3d9\uae30 \ucc98\ub9ac

**\uc2a4\ub808\ub4dc \ud480 \ud65c\uc6a9 (\ub77c\uc778 231)**
```python
self.thread_pool = ThreadPoolExecutor(max_workers=4)
```
CPU \uc9d1\uc57d\uc801 \uc791\uc5c5\uc740 ThreadPoolExecutor\ub97c \ud1b5\ud574 \ubcc4\ub3c4 \uc2a4\ub808\ub4dc\uc5d0\uc11c \ucc98\ub9ac\ud558\uc5ec \uba54\uc778 \uc774\ubca4\ud2b8 \ub8e8\ud504\ub97c \ube14\ub85c\ud0b9\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.

**\ucf54\ub8e8\ud2f4 \ucd5c\uc801\ud654**
I/O \ubc14\uc6b4\ub4dc \uc791\uc5c5\uc740 asyncio \ucf54\ub8e8\ud2f4\uc73c\ub85c \ucc98\ub9ac\ud558\uc5ec \ub3d9\uc2dc\uc131\uc744 \uadf9\ub300\ud654\ud569\ub2c8\ub2e4.

## 6. \uc5d0\ub7ec \ucc98\ub9ac \ubc0f \ubcf5\uc6d0\ub825

### 6.1 \ucd08\uae30\ud654 \ub2e8\uacc4 \uc5d0\ub7ec \ucc98\ub9ac (522-547\ubc88 \ub77c\uc778)

**\uc5c4\uaca9\ud55c \ucd08\uae30\ud654 \ubaa8\ub4dc**
```python
def _validate_initialization_results(self, results):
    if failed_components > 0:
        failed_names = [component_names[i] for i, r in enumerate(results) if r is not True]
        error_msg = f"\ucd08\uae30\ud654 \uc2e4\ud328 \ucef4\ud3ec\ub10c\ud2b8 ({failed_components}\uac1c): {', '.join(failed_names)}"
        raise RuntimeError(f"\ucef4\ud3ec\ub10c\ud2b8 \ucd08\uae30\ud654 \uc2e4\ud328 - {error_msg}")
```

**\ud0c0\uc784\uc544\uc6c3 \ucc98\ub9ac (\ub77c\uc778 292-295)**
```python
except asyncio.TimeoutError:
    error_msg = f"\ucef4\ud3ec\ub10c\ud2b8 \ucd08\uae30\ud654\uac00 {timeout_seconds}\ucd08 \ub0b4\uc5d0 \uc644\ub8cc\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."
    self.logger.error(error_msg)
    raise RuntimeError(error_msg)
```

### 6.2 \uacc4\ub2e8\uc2dd \uc2e4\ud328 \ucc98\ub9ac

\ubaa8\ub4c8 \ud558\ub098\uac00 \uc2e4\ud328\ud574\ub3c4 \uc804\uccb4 \uc2dc\uc2a4\ud15c\uc740 \uacc4\uc18d \uc791\ub3d9\ud569\ub2c8\ub2e4. \uc2e4\ud328\ud55c \ubaa8\ub4c8\uc758 \uacb0\uacfc\ub294 None\uc73c\ub85c \ucc98\ub9ac\ub418\uace0, \ub098\uba38\uc9c0 \ubaa8\ub4c8\uc758 \uacb0\uacfc\ub9cc\uc73c\ub85c \ucd5c\uc885 \ubd84\uc11d\uc774 \uc218\ud589\ub429\ub2c8\ub2e4.

### 6.3 \uc790\ub3d9 \ubcf5\uad6c \uba54\ucee4\ub2c8\uc998

**\ubaa8\ub4c8 \uc7ac\ucd08\uae30\ud654**
\ud2b9\uc815 \ubaa8\ub4c8\uc774 \uc5f0\uc18d 3\ud68c \uc2e4\ud328\ud558\uba74 \uc790\ub3d9\uc73c\ub85c \uc7ac\ucd08\uae30\ud654\ub97c \uc2dc\ub3c4\ud569\ub2c8\ub2e4.

**\ud3f4\ubc31 \ubaa8\ub4dc**
\uace0\uae09 \uae30\ub2a5\uc774 \uc2e4\ud328\ud558\uba74 \uae30\ubcf8 \uae30\ub2a5\uc73c\ub85c \uc790\ub3d9 \uc804\ud658\ub418\uc5b4 \uc11c\ube44\uc2a4 \uc5f0\uc18d\uc131\uc744 \ubcf4\uc7a5\ud569\ub2c8\ub2e4.

## 7. \uc6b4\uc601 \ubaa8\ub4dc

### 7.1 \ud504\ub85c\ub355\uc158 \ub8e8\ud504 (1066-1106\ubc88 \ub77c\uc778)

```python
async def run_production_loop(self):
    while not self.shutdown_event.is_set():
        try:
            request = await self.request_queue.get(timeout=1.0)
            result = await self.analyze_with_bridge_coordinator(request)
            await self.result_queue.put(result)
        except queue.Empty:
            continue
        except Exception as e:
            self.logger.error(f"\ud504\ub85c\ub355\uc158 \ub8e8\ud504 \uc624\ub958: {e}")
```

### 7.2 \uace0\uae09 \ubd84\uc11d \ubaa8\ub4dc (1108-1160\ubc88 \ub77c\uc778)

\ub514\ubc84\uae45\uacfc \uac1c\ubc1c\uc744 \uc704\ud55c \uc0c1\uc138 \ubd84\uc11d \ubaa8\ub4dc\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4:
```python
async def run_advanced_analysis(self):
    # \uc0c1\uc138 \ub85c\uae45 \ud65c\uc131\ud654
    self.enable_verbose_logging()
    
    # \ubaa8\ub4e0 \ubaa8\ub4c8 \ud65c\uc131\ud654
    request.include_all = True
    
    # \ud504\ub85c\ud30c\uc77c\ub9c1 \ud65c\uc131\ud654
    self.enable_profiling()
```

### 7.3 \uc2dc\uc2a4\ud15c \ud14c\uc2a4\ud2b8 (1162-1230\ubc88 \ub77c\uc778)

\uc804\uccb4 \uc2dc\uc2a4\ud15c\uc758 \ud1b5\ud569 \ud14c\uc2a4\ud2b8\ub97c \uc218\ud589\ud569\ub2c8\ub2e4:
```python
async def run_system_test(self):
    test_cases = self._generate_test_cases()
    for test_case in test_cases:
        result = await self.analyze_with_bridge_coordinator(test_case)
        self._validate_result(result)
```

## 8. \ub85c\uae45 \uc2dc\uc2a4\ud15c

### 8.1 \ub2e4\uce35 \ub85c\uae45 \uad6c\uc870

**\uc2dc\uc2a4\ud15c \ub85c\uadf8**
\uc804\uccb4 \uc2dc\uc2a4\ud15c \uc0c1\ud0dc, \ucd08\uae30\ud654, \uc885\ub8cc \ub4f1 \uc8fc\uc694 \uc774\ubca4\ud2b8\ub97c \uae30\ub85d\ud569\ub2c8\ub2e4.

**\ubaa8\ub4c8\ubcc4 \ub85c\uadf8**
\uac01 \ubaa8\ub4c8\uc758 \ucc98\ub9ac \uacfc\uc815, \uc131\ub2a5 \uc9c0\ud45c, \uc5d0\ub7ec\ub97c \uac1c\ubcc4\uc801\uc73c\ub85c \ucd94\uc801\ud569\ub2c8\ub2e4.

**\ud559\uc2b5 \ub85c\uadf8**
\ud6c4\ud68c \ud559\uc2b5, \uac10\uc815 \ud559\uc2b5 \ub4f1 \ud559\uc2b5 \uad00\ub828 \uba54\ud2b8\ub9ad\uc744 \ubcc4\ub3c4\ub85c \uae30\ub85d\ud569\ub2c8\ub2e4.

### 8.2 \uc131\ub2a5 \uba54\ud2b8\ub9ad \ucd94\uc801

- total_requests: \ucd1d \ucc98\ub9ac \uc694\uccad \uc218
- successful_analyses: \uc131\uacf5\ud55c \ubd84\uc11d \uc218
- failed_analyses: \uc2e4\ud328\ud55c \ubd84\uc11d \uc218
- average_processing_time: \ud3c9\uade0 \ucc98\ub9ac \uc2dc\uac04
- cache_hits: \uce90\uc2dc \uc801\uc911\ub960

## 9. \ud655\uc7a5\uc131 \uace0\ub824\uc0ac\ud56d

### 9.1 \ud50c\ub7ec\uadf8\uc778 \uc544\ud0a4\ud14d\ucc98

\uc0c8\ub85c\uc6b4 \ubaa8\ub4c8\uc740 ModuleAdapter \uc778\ud130\ud398\uc774\uc2a4\ub97c \uad6c\ud604\ud558\uc5ec \uc27d\uac8c \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uae30\uc874 \uc2dc\uc2a4\ud15c\uc744 \uc218\uc815\ud558\uc9c0 \uc54a\uace0\ub3c4 \uae30\ub2a5\uc744 \ud655\uc7a5\ud560 \uc218 \uc788\ub294 \uad6c\uc870\uc785\ub2c8\ub2e4.

### 9.2 \ub2e4\uad6d\uc5b4 \uc9c0\uc6d0

language \ud30c\ub77c\ubbf8\ud130\ub97c \ud1b5\ud574 \ub2e4\uc591\ud55c \uc5b8\uc5b4\ub97c \uc9c0\uc6d0\ud558\uba70, \uac01 \ubaa8\ub4c8\uc740 \uc5b8\uc5b4\ubcc4 \ud2b9\ud654 \ucc98\ub9ac\ub97c \uc218\ud589\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.

### 9.3 \uc218\ud3c9 \ud655\uc7a5\uc131

\uc5ec\ub7ec \uc778\uc2a4\ud134\uc2a4\ub97c \ubcd1\ub82c\ub85c \uc2e4\ud589\ud558\uc5ec \ucc98\ub9ac\ub7c9\uc744 \uc99d\uac00\uc2dc\ud0ac \uc218 \uc788\ub3c4\ub85d \uc124\uacc4\ub418\uc5c8\uc2b5\ub2c8\ub2e4.

## 10. \ubcf4\uc548 \uace0\ub824\uc0ac\ud56d

### 10.1 \uc785\ub825 \uac80\uc99d

\ubaa8\ub4e0 \uc0ac\uc6a9\uc790 \uc785\ub825\uc740 \uc5c4\uaca9\ud55c \uac80\uc99d\uc744 \uac70\uccd0 SQL \uc778\uc81d\uc158, XSS \ub4f1\uc758 \uacf5\uaca9\uc744 \ubc29\uc9c0\ud569\ub2c8\ub2e4.

### 10.2 \uad8c\ud55c \uad00\ub9ac

\ubaa8\ub4c8\ubcc4\ub85c \uc811\uadfc \uad8c\ud55c\uc744 \uc124\uc815\ud558\uc5ec \ubbfc\uac10\ud55c \uae30\ub2a5\uc5d0 \ub300\ud55c \uc811\uadfc\uc744 \uc81c\ud55c\ud569\ub2c8\ub2e4.

## 11. \uc2e4\uc2dc\uac04 \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \uc9c4\ub2e8

### 11.1 \ud5ec\uc2a4 \uccb4\ud06c \uc5d4\ub4dc\ud3ec\uc778\ud2b8

\uc2dc\uc2a4\ud15c\uc740 /health \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub97c \uc81c\uacf5\ud558\uc5ec \uac01 \ubaa8\ub4c8\uc758 \uc0c1\ud0dc\ub97c \uc2e4\uc2dc\uac04\uc73c\ub85c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:
```python
async def health_check(self):
    health_status = {
        'system': 'healthy',
        'modules': {},
        'memory': {
            'gpu': torch.cuda.memory_allocated() / 1024**3 if torch.cuda.is_available() else 0,
            'cpu': psutil.virtual_memory().percent
        }
    }
    
    for module_name, module in self.get_all_modules():
        health_status['modules'][module_name] = await module.check_health()
    
    return health_status
```

### 11.2 \uc131\ub2a5 \ud504\ub85c\ud30c\uc77c\ub9c1

\uc0c1\uc138 \uc131\ub2a5 \ubd84\uc11d\uc744 \uc704\ud55c \ud504\ub85c\ud30c\uc77c\ub9c1 \uae30\ub2a5:
```python
def enable_profiling(self):
    self.profiler = cProfile.Profile()
    self.profiler.enable()
    
def get_profiling_stats(self):
    self.profiler.disable()
    stats = pstats.Stats(self.profiler)
    stats.sort_stats('cumulative')
    return stats
```

## 12. \uacb0\ub860

main.py\ub294 \ub2e8\uc21c\ud55c \uc2e4\ud589 \ud30c\uc77c\uc774 \uc544\ub2c8\ub77c Red Heart AI\uc758 \ubaa8\ub4e0 \uc9c0\ub2a5\ud615 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc870\ud654\ub86d\uac8c \uc6b4\uc601\ud558\ub294 \uc9c0\ud718\uc790 \uc5ed\ud560\uc744 \uc218\ud589\ud569\ub2c8\ub2e4. \ube44\ub3d9\uae30 \ucc98\ub9ac, \ubcd1\ub82c \uc2e4\ud589, \uce90\uc2f1, \uc5d0\ub7ec \ubcf5\uad6c \ub4f1 \uc5d4\ud130\ud504\ub77c\uc774\uc988\uae09 \uae30\ub2a5\uc744 \ubaa8\ub450 \uac16\ucd94\uace0 \uc788\uc73c\uba70, \ub3d9\uc2dc\uc5d0 8GB GPU\ub77c\ub294 \uc81c\ud55c\ub41c \ub9ac\uc18c\uc2a4\uc5d0\uc11c\ub3c4 \ud6a8\uc728\uc801\uc73c\ub85c \uc791\ub3d9\ud558\ub3c4\ub85d \ucd5c\uc801\ud654\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.

\ud2b9\ud788 ModuleBridgeCoordinator\uc640\uc758 \uae34\ubc00\ud55c \uc5f0\ub3d9\uc744 \ud1b5\ud574 \uac01 \ubaa8\ub4c8\uc758 \ub3c5\ub9bd\uc131\uc744 \uc720\uc9c0\ud558\uba74\uc11c\ub3c4 \ud1b5\ud569\ub41c \ubd84\uc11d \uacb0\uacfc\ub97c \uc81c\uacf5\ud560 \uc218 \uc788\ub2e4\ub294 \uc810\uc774 \ud575\uc2ec \uac15\uc810\uc785\ub2c8\ub2e4. \uc774\ub7ec\ud55c \uad6c\uc870\ub294 \ud5a5\ud6c4 \uc0c8\ub85c\uc6b4 AI \ubaa8\ub4c8\uc774 \ucd94\uac00\ub418\ub354\ub77c\ub3c4 \uae30\uc874 \uc2dc\uc2a4\ud15c\uc758 \uc548\uc815\uc131\uc744 \ud574\uce58\uc9c0 \uc54a\uc73c\uba74\uc11c \ud655\uc7a5\ud560 \uc218 \uc788\ub294 \uacac\uace0\ud55c \uae30\ubc18\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.

### \ud575\uc2ec \uc131\uacfc \uc9c0\ud45c

- **\ucd08\uae30\ud654 \uc2dc\uac04**: < 60\ucd08 (\ubaa8\ub4e0 \ubaa8\ub4c8 \ubcd1\ub82c \ub85c\ub4dc)
- **\ud3c9\uade0 \ucc98\ub9ac \uc2dc\uac04**: 200ms (\ubcd1\ub82c) / 400ms (\uc21c\ucc28)
- **\uce90\uc2dc \uc801\uc911\ub960**: 70-80% (\uc77c\ubc18 \uc0ac\uc6a9 \ud328\ud134)
- **\uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub960**: 7.2GB / 8GB (90%)
- **\ub3d9\uc2dc \ucc98\ub9ac \uc694\uccad**: 50+ (\ube44\ub3d9\uae30 \uad6c\uc870)

\uc774\ub7ec\ud55c \uc131\uacfc\ub294 \uc81c\ud55c\ub41c \ud558\ub4dc\uc6e8\uc5b4 \ud658\uacbd\uc5d0\uc11c\ub3c4 \uc2e4\uc6a9\uc801\uc778 AI \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud560 \uc218 \uc788\uc74c\uc744 \uc99d\uba85\ud569\ub2c8\ub2e4.