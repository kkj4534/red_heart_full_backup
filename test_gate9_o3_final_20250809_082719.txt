🚀 Red Heart AI 통합 학습 시스템 시작
===========================================
[0;34m[INFO][0m 작업 디렉토리: /mnt/c/large_project/linux_red_heart
[0;34m[INFO][0m Red Heart AI 통합 환경 상태 확인 중...
[0;32m[SUCCESS][0m ✅ red_heart_env 가상환경 존재
[0;32m[SUCCESS][0m ✅ faiss-test conda 환경 존재
[0;32m[SUCCESS][0m ✅ FAISS 설치됨 및 작동 확인
✅ Red Heart AI 통합 환경 활성화 완료
   - venv: /mnt/c/large_project/linux_red_heart/red_heart_env
   - conda: faiss-test (함께 활성화됨)
   - python: /mnt/c/large_project/linux_red_heart/red_heart_env/bin/python
   - 환경 분리: faiss→conda subprocess, 나머지→venv
[0;32m[SUCCESS][0m ✅ 주요 패키지 (torch, transformers, numpy) 설치됨
[0;32m[SUCCESS][0m 🎉 모든 환경이 이미 준비되어 있습니다!
✅ Red Heart AI 통합 환경 활성화 완료
   - venv: /mnt/c/large_project/linux_red_heart/red_heart_env
   - conda: faiss-test (함께 활성화됨)
   - python: /mnt/c/large_project/linux_red_heart/red_heart_env/bin/python
   - 환경 분리: faiss→conda subprocess, 나머지→venv
[0;32m[SUCCESS][0m ✅ Red Heart AI 통합 환경 활성화 완료
[0;32m[SUCCESS][0m    - venv: /mnt/c/large_project/linux_red_heart/red_heart_env
[0;32m[SUCCESS][0m    - conda: faiss-test 환경 준비됨
[0;32m[SUCCESS][0m    - python: /mnt/c/large_project/linux_red_heart/red_heart_env/bin/python
[0;32m[SUCCESS][0m    - 환경 분리: faiss→conda subprocess, 나머지→venv
[0;34m[INFO][0m Red Heart AI 통합 학습 시스템 시작
[0;34m[INFO][0m 환경 분리: conda(faiss) + venv(transformers,torch)
[0;34m[INFO][0m Red Heart AI 통합 학습 시스템 실행 시작...
[0;34m[INFO][0m 실행 모드: unified-test
[0;34m[INFO][0m 🧪 800M 통합 시스템 테스트 모드...
🔍 [초기화 시작 전] GPU 메모리 상태:
   💾 총 메모리: 8.00GB
   📊 할당됨: 0.000GB (0.0%)
   📦 예약됨: 0.000GB
   💚 여유: 8.000GB
   🔄 config.py 측정: 0.0%
/mnt/c/large_project/linux_red_heart/red_heart_env/lib/python3.12/site-packages/torch/__init__.py:1021: FutureWarning: `torch.distributed.reduce_op` is deprecated, please use `torch.distributed.ReduceOp` instead
  return isinstance(obj, torch.Tensor)
   🧠 GPU 텐서: 0개, 0.000GB
   🗂️ 캐시된 메모리: 0.000GB
🔍 fast_init_mode = False
🌐 전역 모듈 순차 초기화 시작 - MasterMemoryOrchestrator 관리
Device set to use cuda:0
Failed to determine 'entailment' label id from the label2id mapping in the model config. Setting to -1. Define a descriptive label2id mapping in the model config to ensure correct outputs.
Some weights of ElectraForSequenceClassification were not initialized from the model checkpoint at beomi/KcELECTRA-base-v2022 and are newly initialized: ['classifier.dense.bias', 'classifier.dense.weight', 'classifier.out_proj.bias', 'classifier.out_proj.weight']
You should probably TRAIN this model on a down-stream task to be able to use it for predictions and inference.
Device set to use cuda:0
Device set to use cuda:0
Device set to use cuda:0
언로드 요청된 모델이 레지스트리에 없음: semantic_analyzer
HierarchicalPatternStructure: PyTorch 네트워크가 없음 (딕셔너리 기반 구조)
HierarchicalPatternStructure: PyTorch 네트워크가 없음 (딕셔너리 기반 구조)
   ⚠️ DSM 등록 스킵: neural_components (nn.Module 추출 실패)
⚠️ 클래스 'AdvancedSurdAnalyzer' 대신 'AdvancedSURDAnalyzer' 사용 (유사도 기반)
   ⚠️ DSM 등록 스킵: surd_analyzer (nn.Module 추출 실패)
⚠️ 클래스 'AdvancedBayesianInferenceModule' 대신 'AdvancedBayesianInference' 사용 (유사도 기반)
   ⚠️ DSM 등록 스킵: bayesian_engine (nn.Module 추출 실패)
   ⚠️ DSM 등록 스킵: llm_engine (nn.Module 추출 실패)
   ⚠️ DSM 등록 스킵: experience_database (nn.Module 추출 실패)
   ⚠️ DSM 등록 스킵: hierarchical_emotion (nn.Module 추출 실패)
   ⚠️ DSM 등록 스킵: usage_pattern_analyzer (nn.Module 추출 실패)
⚠️ meta_integration 이미 등록됨 (동일 타입: AdvancedMetaIntegrationSystem), 스킵
⚠️ GPU 사용률이 낮습니다 (47.5%) - 더 적극적 로딩 필요
✅ 전역 모듈 순차 초기화 완료
🔍 [전역 모듈 초기화 후] GPU 메모리 상태:
   💾 총 메모리: 8.00GB
   📊 할당됨: 3.779GB (47.2%)
   📦 예약됨: 3.875GB
   💚 여유: 4.220GB
   🔄 config.py 측정: 47.2%
   🧠 GPU 텐서: 1767개, 3.750GB
   📋 큰 텐서 TOP 5:
      1. [50265, 1024] (torch.float32) - 196.3MB
      2. [54343, 768] (torch.float32) - 159.2MB
      3. [54343, 768] (torch.float32) - 159.2MB
      4. [50265, 768] (torch.float32) - 147.3MB
      5. [50265, 768] (torch.float32) - 147.3MB
   🗂️ 캐시된 메모리: 0.096GB
   🔝 새로운 Peak 메모리: 3.807GB (at 전역 모듈 초기화 후)
🔍 [백본 초기화 후] GPU 메모리 상태:
   💾 총 메모리: 8.00GB
   📊 할당됨: 5.501GB (68.8%)
   📦 예약됨: 5.629GB
   💚 여유: 2.499GB
   🔄 config.py 측정: 68.8%
   🧠 GPU 텐서: 2011개, 5.435GB
   📋 큰 텐서 TOP 5:
      1. [50000, 1280] (torch.float32) - 244.1MB
      2. [50265, 1024] (torch.float32) - 196.3MB
      3. [54343, 768] (torch.float32) - 159.2MB
      4. [54343, 768] (torch.float32) - 159.2MB
      5. [50265, 768] (torch.float32) - 147.3MB
   🗂️ 캐시된 메모리: 0.128GB
   🔝 새로운 Peak 메모리: 5.501GB (at 백본 초기화 후)
🔍 [스왑 매니저 초기화 후] GPU 메모리 상태:
   💾 총 메모리: 8.00GB
   📊 할당됨: 5.501GB (68.8%)
   📦 예약됨: 5.629GB
   💚 여유: 2.499GB
   🔄 config.py 측정: 68.8%
   🧠 GPU 텐서: 2011개, 5.435GB
   📋 큰 텐서 TOP 5:
      1. [50000, 1280] (torch.float32) - 244.1MB
      2. [50265, 1024] (torch.float32) - 196.3MB
      3. [54343, 768] (torch.float32) - 159.2MB
      4. [54343, 768] (torch.float32) - 159.2MB
      5. [50265, 768] (torch.float32) - 147.3MB
   🗂️ 캐시된 메모리: 0.128GB
🔍 [헤드 호환성 매니저 생성 후] GPU 메모리 상태:
   💾 총 메모리: 8.00GB
   📊 할당됨: 5.501GB (68.8%)
   📦 예약됨: 5.629GB
   💚 여유: 2.499GB
   🔄 config.py 측정: 68.8%
   🧠 GPU 텐서: 2011개, 5.435GB
   📋 큰 텐서 TOP 5:
      1. [50000, 1280] (torch.float32) - 244.1MB
      2. [50265, 1024] (torch.float32) - 196.3MB
      3. [54343, 768] (torch.float32) - 159.2MB
      4. [54343, 768] (torch.float32) - 159.2MB
      5. [50265, 768] (torch.float32) - 147.3MB
   🗂️ 캐시된 메모리: 0.128GB
🚨 헤드 초기화 시작 - 메모리 폭발 의심 구간!
🔍 head_compatibility_manager = <class 'head_compatibility_interface.HeadCompatibilityManager'>
🔍 head_compatibility_manager.initialized = False
🔍 initialize_all_heads() 호출 직전...
⚠️ 메모리 관리 주의: 69.7% (85% 초과)
📊 추가 활용 가능: 현재 72.4% (목표 82%)
🔍 initialize_all_heads() 호출 완료!
🚨 헤드 초기화 완료 - 메모리 상태 확인 중...
🔍 [모든 헤드 초기화 후] GPU 메모리 상태:
   💾 총 메모리: 8.00GB
   📊 할당됨: 5.794GB (72.4%)
   📦 예약됨: 5.941GB
   💚 여유: 2.205GB
   🔄 config.py 측정: 72.4%
   🧠 GPU 텐서: 2056개, 5.727GB
   📋 큰 텐서 TOP 5:
      1. [50000, 1280] (torch.float32) - 244.1MB
      2. [50265, 1024] (torch.float32) - 196.3MB
      3. [54343, 768] (torch.float32) - 159.2MB
      4. [54343, 768] (torch.float32) - 159.2MB
      5. [50265, 768] (torch.float32) - 147.3MB
   🗂️ 캐시된 메모리: 0.147GB
   🔝 새로운 Peak 메모리: 5.794GB (at 모든 헤드 초기화 후)
🚨 긴급 GPU 메모리 정리 시작
🚨 초기 GPU 메모리: 72.4% 사용 중
🔍 실제 GPU 상주 모델 전면 스캔 시작...
🔍 PyTorch 실제 메모리: 할당=5.79GB, 예약=5.94GB
🗑️ 총 328개 모델 중 CRITICAL 외 모든 모델 언로드 시작
🧹 최종 전면 메모리 정리 시작...
🧹 가비지 컬렉션 1회: 257개 객체 정리
🧹 가비지 컬렉션 2회: 0개 객체 정리
🧹 가비지 컬렉션 3회: 0개 객체 정리
🚀 CUDA 캐시 완전 정리 완료
✅ 긴급 정리 완료:
   📊 메모리 사용률: 72.4% → 72.4% (+0.0%)
   🗑️ 언로드된 모델: 0개
   💾 해제된 메모리: 0MB
🔍 [자동 메모리 정리 후] GPU 메모리 상태:
   💾 총 메모리: 8.00GB
   📊 할당됨: 5.794GB (72.4%)
   📦 예약됨: 5.941GB
   💚 여유: 2.205GB
   🔄 config.py 측정: 72.4%
   🧠 GPU 텐서: 2056개, 5.727GB
   📋 큰 텐서 TOP 5:
      1. [50000, 1280] (torch.float32) - 244.1MB
      2. [50265, 1024] (torch.float32) - 196.3MB
      3. [54343, 768] (torch.float32) - 159.2MB
      4. [54343, 768] (torch.float32) - 159.2MB
      5. [50265, 768] (torch.float32) - 147.3MB
   🗂️ 캐시된 메모리: 0.147GB
🔍 [시너지 시스템 초기화 후] GPU 메모리 상태:
   💾 총 메모리: 8.00GB
   📊 할당됨: 5.794GB (72.4%)
   📦 예약됨: 5.941GB
   💚 여유: 2.205GB
   🔄 config.py 측정: 72.4%
   🧠 GPU 텐서: 2056개, 5.727GB
   📋 큰 텐서 TOP 5:
      1. [50000, 1280] (torch.float32) - 244.1MB
      2. [50265, 1024] (torch.float32) - 196.3MB
      3. [54343, 768] (torch.float32) - 159.2MB
      4. [54343, 768] (torch.float32) - 159.2MB
      5. [50265, 768] (torch.float32) - 147.3MB
   🗂️ 캐시된 메모리: 0.147GB
🔍 [학습 시스템 초기화 후] GPU 메모리 상태:
   💾 총 메모리: 8.00GB
   📊 할당됨: 7.515GB (93.9%)
   📦 예약됨: 7.697GB
   💚 여유: 0.484GB
   🔄 config.py 측정: 93.9%
   🧠 GPU 텐서: 2300개, 7.412GB
   📋 큰 텐서 TOP 5:
      1. [50000, 1280] (torch.float32) - 244.1MB
      2. [50000, 1280] (torch.float32) - 244.1MB
      3. [50265, 1024] (torch.float32) - 196.3MB
      4. [54343, 768] (torch.float32) - 159.2MB
      5. [54343, 768] (torch.float32) - 159.2MB
   🗂️ 캐시된 메모리: 0.182GB
   ⚠️ WARNING: 높은 메모리 사용률 (93.9%)
   🔝 새로운 Peak 메모리: 7.515GB (at 학습 시스템 초기화 후)
🔍 [패턴 분석기 초기화 후] GPU 메모리 상태:
   💾 총 메모리: 8.00GB
   📊 할당됨: 7.515GB (93.9%)
   📦 예약됨: 7.697GB
   💚 여유: 0.484GB
   🔄 config.py 측정: 93.9%
   🧠 GPU 텐서: 2300개, 7.412GB
   📋 큰 텐서 TOP 5:
      1. [50000, 1280] (torch.float32) - 244.1MB
      2. [50000, 1280] (torch.float32) - 244.1MB
      3. [50265, 1024] (torch.float32) - 196.3MB
      4. [54343, 768] (torch.float32) - 159.2MB
      5. [54343, 768] (torch.float32) - 159.2MB
   🗂️ 캐시된 메모리: 0.182GB
   ⚠️ WARNING: 높은 메모리 사용률 (93.9%)
훈련 중 오류 발생: 등록되지 않은 헤드: emotion_empathy_head
😨 상세 에러 스택:
Traceback (most recent call last):
  File "/mnt/c/large_project/linux_red_heart/unified_learning_system.py", line 1611, in train_unified_system
    await self._load_active_heads(active_heads)
  File "/mnt/c/large_project/linux_red_heart/unified_learning_system.py", line 1687, in _load_active_heads
    await self.swap_manager.load_head_to_gpu(head_type.value)
  File "/mnt/c/large_project/linux_red_heart/dynamic_swap_manager.py", line 530, in load_head_to_gpu
    raise ValueError(f"등록되지 않은 헤드: {head_name}")
ValueError: 등록되지 않은 헤드: emotion_empathy_head

🔍 에러 타입: ValueError
📍 에퟼크: 1/1, 배치: 0
Python 통합 학습 오류: 등록되지 않은 헤드: emotion_empathy_head
😨 상세 에러 스택:
Traceback (most recent call last):
  File "/mnt/c/large_project/linux_red_heart/unified_system_orchestrator.py", line 1694, in _run_python_training
    await self.learning_system.train_unified_system(
  File "/mnt/c/large_project/linux_red_heart/unified_learning_system.py", line 1611, in train_unified_system
    await self._load_active_heads(active_heads)
  File "/mnt/c/large_project/linux_red_heart/unified_learning_system.py", line 1687, in _load_active_heads
    await self.swap_manager.load_head_to_gpu(head_type.value)
  File "/mnt/c/large_project/linux_red_heart/dynamic_swap_manager.py", line 530, in load_head_to_gpu
    raise ValueError(f"등록되지 않은 헤드: {head_name}")
ValueError: 등록되지 않은 헤드: emotion_empathy_head

🔍 에러 타입: ValueError
📍 num_epochs: 1, num_batches: 1
🔍 [초기화 시작 전] GPU 메모리 상태:
   💾 총 메모리: 8.00GB
   📊 할당됨: 7.515GB (93.9%)
   📦 예약됨: 7.697GB
   💚 여유: 0.484GB
   🔄 config.py 측정: 93.9%
   🧠 GPU 텐서: 2300개, 7.412GB
   📋 큰 텐서 TOP 5:
      1. [50000, 1280] (torch.float32) - 244.1MB
      2. [50000, 1280] (torch.float32) - 244.1MB
      3. [50265, 1024] (torch.float32) - 196.3MB
      4. [54343, 768] (torch.float32) - 159.2MB
      5. [54343, 768] (torch.float32) - 159.2MB
   🗂️ 캐시된 메모리: 0.182GB
   ⚠️ WARNING: 높은 메모리 사용률 (93.9%)
🔍 fast_init_mode = False
🌐 전역 모듈 순차 초기화 시작 - MasterMemoryOrchestrator 관리
⚠️ GPU 메모리 부족 - 정리 시작 (사용률: 93.9%, 여유: 309.5625MB)
🚨 긴급 GPU 메모리 정리 시작
🚨 초기 GPU 메모리: 93.9% 사용 중
🔍 실제 GPU 상주 모델 전면 스캔 시작...
🔍 PyTorch 실제 메모리: 할당=7.52GB, 예약=7.70GB
🗑️ 총 415개 모델 중 CRITICAL 외 모든 모델 언로드 시작
🧹 최종 전면 메모리 정리 시작...
🧹 가비지 컬렉션 1회: 257개 객체 정리
🧹 가비지 컬렉션 2회: 0개 객체 정리
🧹 가비지 컬렉션 3회: 0개 객체 정리
🚀 CUDA 캐시 완전 정리 완료
✅ 긴급 정리 완료:
   📊 메모리 사용률: 93.9% → 93.9% (+0.0%)
   🗑️ 언로드된 모델: 0개
   💾 해제된 메모리: 0MB
⚠️ 메모리 사용률이 여전히 높음 - 추가 조치 필요
❌ GPU 메모리 공간 확보 실패 - 필요: 900MB, 여유: 309.5625MB
[GPU BLOCKING] ❌ transformers.models.auto.tokenization_auto_opus-mt-ko-en 할당 실패: 타임아웃 (30.0초)
⚠️ 메모리 확보 실패했지만 선택 모듈이므로 계속 진행: transformers.models.auto.tokenization_auto_opus-mt-ko-en
[GPU BLOCKING] ❌ translator_opus-mt-ko-en 할당 실패: 타임아웃 (30.0초)
⚠️ 메모리 확보 실패했지만 선택 모듈이므로 계속 진행: translator_opus-mt-ko-en
⚠️ translator 이미 등록됨 (동일 타입: LocalTranslator), 스킵
⚠️ GPU 메모리 부족 - 정리 시작 (사용률: 93.9%, 여유: 309.5625MB)
🚨 긴급 GPU 메모리 정리 시작
🚨 초기 GPU 메모리: 93.9% 사용 중
🔍 실제 GPU 상주 모델 전면 스캔 시작...
🔍 PyTorch 실제 메모리: 할당=7.52GB, 예약=7.70GB
🗑️ 총 415개 모델 중 CRITICAL 외 모든 모델 언로드 시작
🧹 최종 전면 메모리 정리 시작...
🧹 가비지 컬렉션 1회: 45개 객체 정리
🧹 가비지 컬렉션 2회: 0개 객체 정리
🧹 가비지 컬렉션 3회: 0개 객체 정리
🚀 CUDA 캐시 완전 정리 완료
✅ 긴급 정리 완료:
   📊 메모리 사용률: 93.9% → 93.9% (+0.0%)
   🗑️ 언로드된 모델: 0개
   💾 해제된 메모리: 0MB
⚠️ 메모리 사용률이 여전히 높음 - 추가 조치 필요
❌ GPU 메모리 공간 확보 실패 - 필요: 700MB, 여유: 309.5625MB
[언로드 불가] 더 이상 언로드할 수 있는 모델이 없습니다
[DSM] GPU 사용률 93.9%로 목표 85.0% 달성 실패
스왑 공간 부족: temp_model_1754696330 (필요: 1000MB, 확보: FalseMB)
비동기 실행 타임아웃
스왑 대기 타임아웃: temp_model_1754696330 (최대 대기 시간 30.0초 초과)
[GPU BLOCKING] ❌ transformers.pipelines.base_emotion-english-distilroberta-base 할당 실패: 타임아웃 (30.0초)
⚠️ 메모리 확보 실패했지만 선택 모듈이므로 계속 진행: transformers.pipelines.base_emotion-english-distilroberta-base
[GPU BLOCKING] ❌ transformers.pipelines_emotion-english-distilroberta-base 할당 실패: 타임아웃 (30.0초)
⚠️ 메모리 확보 실패했지만 선택 모듈이므로 계속 진행: transformers.pipelines_emotion-english-distilroberta-base
Device set to use cpu
Failed to determine 'entailment' label id from the label2id mapping in the model config. Setting to -1. Define a descriptive label2id mapping in the model config to ensure correct outputs.
[GPU BLOCKING] ❌ emotion_analyzer_emotion-english-distilroberta-base 할당 실패: 타임아웃 (30.0초)
[GPU BLOCKING] ❌ emotion_analyzer_emotion-english-distilroberta-base 할당 중 오류: [GPU BLOCKING] ❌ emotion_analyzer_emotion-english-distilroberta-base 할당 실패: 타임아웃 (30.0초)
다국어 모델 로드 실패: [GPU BLOCKING] ❌ emotion_analyzer_emotion-english-distilroberta-base 할당 중 오류: [GPU BLOCKING] ❌ emotion_analyzer_emotion-english-distilroberta-base 할당 실패: 타임아웃 (30.0초)
모델 초기화 실패: [GPU BLOCKING] ❌ emotion_analyzer_emotion-english-distilroberta-base 할당 중 오류: [GPU BLOCKING] ❌ emotion_analyzer_emotion-english-distilroberta-base 할당 실패: 타임아웃 (30.0초)
AdvancedEmotionAnalyzer 초기화 실패: [GPU BLOCKING] ❌ emotion_analyzer_emotion-english-distilroberta-base 할당 중 오류: [GPU BLOCKING] ❌ emotion_analyzer_emotion-english-distilroberta-base 할당 실패: 타임아웃 (30.0초)
⚠️ 대형 모델 로드 실패했지만 기본 네트워크로 계속 진행
⚠️ emotion_analyzer 이미 등록됨 (동일 타입: AdvancedEmotionAnalyzer), 스킵
⚠️ GPU 메모리 부족 - 정리 시작 (사용률: 90.1%, 여유: 457.5625MB)
🚨 긴급 GPU 메모리 정리 시작
🚨 초기 GPU 메모리: 90.1% 사용 중
🔍 실제 GPU 상주 모델 전면 스캔 시작...
🔍 PyTorch 실제 메모리: 할당=7.21GB, 예약=7.55GB
🗑️ 총 410개 모델 중 CRITICAL 외 모든 모델 언로드 시작
🧹 최종 전면 메모리 정리 시작...
🧹 가비지 컬렉션 1회: 375개 객체 정리
🧹 가비지 컬렉션 2회: 0개 객체 정리
🧹 가비지 컬렉션 3회: 0개 객체 정리
🚀 CUDA 캐시 완전 정리 완료
✅ 긴급 정리 완료:
   📊 메모리 사용률: 90.1% → 90.1% (+0.0%)
   🗑️ 언로드된 모델: 0개
   💾 해제된 메모리: 0MB
⚠️ 메모리 사용률이 여전히 높음 - 추가 조치 필요
GPU 메모리 사용률 위험 수준: 90.1%
긴급 GPU 메모리 최적화 시작
긴급 GPU 메모리 최적화 완료
[언로드 불가] 더 이상 언로드할 수 있는 모델이 없습니다
[DSM] GPU 사용률 90.1%로 목표 85.0% 달성 실패
스왑 공간 부족: temp_model_1754696431 (필요: 600MB, 확보: FalseMB)
비동기 실행 타임아웃
⚠️ bentham_calculator 이미 등록됨 (동일 타입: AdvancedBenthamCalculator), 스킵
⚠️ GPU 메모리 부족 - 정리 시작 (사용률: 90.1%, 여유: 457.5625MB)
🚨 긴급 GPU 메모리 정리 시작
🚨 초기 GPU 메모리: 90.1% 사용 중
🔍 실제 GPU 상주 모델 전면 스캔 시작...
🔍 PyTorch 실제 메모리: 할당=7.21GB, 예약=7.55GB
🗑️ 총 410개 모델 중 CRITICAL 외 모든 모델 언로드 시작
🧹 최종 전면 메모리 정리 시작...
🧹 가비지 컬렉션 1회: 10개 객체 정리
🧹 가비지 컬렉션 2회: 0개 객체 정리
🧹 가비지 컬렉션 3회: 0개 객체 정리
🚀 CUDA 캐시 완전 정리 완료
✅ 긴급 정리 완료:
   📊 메모리 사용률: 90.1% → 90.1% (+0.0%)
   🗑️ 언로드된 모델: 0개
   💾 해제된 메모리: 0MB
⚠️ 메모리 사용률이 여전히 높음 - 추가 조치 필요
❌ GPU 메모리 공간 확보 실패 - 필요: 700MB, 여유: 457.5625MB
모델 초기화 실패: 감정 분석 모델 GPU 로딩 실패: device=cpu, model=None
재시도 1 실패: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None
재시도 2 실패: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None
재시도 3 실패: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None
모든 재시도 실패 - 시스템 종료
AdvancedMultiLevelSemanticAnalyzer 초기화 실패: 모델 초기화 최종 실패: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None
❌ 모듈 semantic_analyzer 로딩 실패: 모델 초기화 최종 실패: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None
🚨 semantic_analyzer 로딩 실패 상세 스택:
Traceback (most recent call last):
  File "/mnt/c/large_project/linux_red_heart/unified_system_orchestrator.py", line 1605, in run_training_pipeline
    raise Exception("Python 통합 학습 시스템 실행 실패")
Exception: Python 통합 학습 시스템 실행 실패

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/large_project/linux_red_heart/advanced_multi_level_semantic_analyzer.py", line 230, in _initialize_models
    raise RuntimeError(f"감정 분석 모델 GPU 로딩 실패: device={emotion_device}, model={emotion_model}")
RuntimeError: 감정 분석 모델 GPU 로딩 실패: device=cpu, model=None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/large_project/linux_red_heart/advanced_multi_level_semantic_analyzer.py", line 386, in _initialize_models
    raise RuntimeError(f"감정 분석 모델 재시도 GPU 로딩 실패: device={emotion_device}, model={emotion_model}")
RuntimeError: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/large_project/linux_red_heart/unified_system_orchestrator.py", line 1200, in _load_single_module
    await initialize_method()
  File "/mnt/c/large_project/linux_red_heart/advanced_multi_level_semantic_analyzer.py", line 145, in initialize
    self._initialize_models()
  File "/mnt/c/large_project/linux_red_heart/advanced_multi_level_semantic_analyzer.py", line 489, in _initialize_models
    raise Exception(f"모델 초기화 최종 실패: {retry_error}")
Exception: 모델 초기화 최종 실패: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None

   ❌ semantic_analyzer 초기화 실패: 모델 초기화 최종 실패: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None
❌ 전역 모듈 초기화 실패: 필수 모듈 semantic_analyzer 초기화 실패: 모델 초기화 최종 실패: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None
❌ 스택 트레이스:
Traceback (most recent call last):
  File "/mnt/c/large_project/linux_red_heart/unified_system_orchestrator.py", line 1605, in run_training_pipeline
    raise Exception("Python 통합 학습 시스템 실행 실패")
Exception: Python 통합 학습 시스템 실행 실패

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/large_project/linux_red_heart/advanced_multi_level_semantic_analyzer.py", line 230, in _initialize_models
    raise RuntimeError(f"감정 분석 모델 GPU 로딩 실패: device={emotion_device}, model={emotion_model}")
RuntimeError: 감정 분석 모델 GPU 로딩 실패: device=cpu, model=None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/large_project/linux_red_heart/advanced_multi_level_semantic_analyzer.py", line 386, in _initialize_models
    raise RuntimeError(f"감정 분석 모델 재시도 GPU 로딩 실패: device={emotion_device}, model={emotion_model}")
RuntimeError: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/large_project/linux_red_heart/unified_system_orchestrator.py", line 904, in _initialize_global_modules_sequential
    module_instance = await asyncio.wait_for(
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/mnt/c/large_project/linux_red_heart/unified_system_orchestrator.py", line 1200, in _load_single_module
    await initialize_method()
  File "/mnt/c/large_project/linux_red_heart/advanced_multi_level_semantic_analyzer.py", line 145, in initialize
    self._initialize_models()
  File "/mnt/c/large_project/linux_red_heart/advanced_multi_level_semantic_analyzer.py", line 489, in _initialize_models
    raise Exception(f"모델 초기화 최종 실패: {retry_error}")
Exception: 모델 초기화 최종 실패: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/mnt/c/large_project/linux_red_heart/unified_system_orchestrator.py", line 1459, in _initialize_core_components
    await self._initialize_global_modules_sequential()
  File "/mnt/c/large_project/linux_red_heart/unified_system_orchestrator.py", line 1052, in _initialize_global_modules_sequential
    raise RuntimeError(f"필수 모듈 {spec['name']} 초기화 실패: {e}")
RuntimeError: 필수 모듈 semantic_analyzer 초기화 실패: 모델 초기화 최종 실패: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None

자동 복구 실패: 전역 모듈 초기화 실패 - 시스템 중단: 필수 모듈 semantic_analyzer 초기화 실패: 모델 초기화 최종 실패: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None
============================================================
🚀 Red Heart AI 통합 시스템 (800M 파라미터)
============================================================
모드: test
시작 시간: 2025-08-09 08:28:44
------------------------------------------------------------
🔧 klue/bert-base 모델: 안정성 보장을 위한 15.0% 할당
📋 Transformer 모델: 최적화된 배치 처리 방식 활성화
[08:37:21] ✅ 시스템 초기화 완료
[08:37:21] 🧪 테스트 모드 시작...

============================================================
🚨 필수 모듈 semantic_analyzer 로딩 실패!
============================================================
에러: 모델 초기화 최종 실패: 감정 분석 모델 재시도 GPU 로딩 실패: device=cpu, model=None
모듈 경로: advanced_multi_level_semantic_analyzer.AdvancedMultiLevelSemanticAnalyzer
============================================================

[08:40:38] ❌ 테스트 모드 실패
스왑 대기 타임아웃: temp_model_1754696431 (최대 대기 시간 30.0초 초과)
/mnt/c/large_project/linux_red_heart/red_heart_env/lib/python3.12/site-packages/llama_cpp/lib/libggml-base.so(+0x16ceb)[0x70d13d87aceb]
/mnt/c/large_project/linux_red_heart/red_heart_env/lib/python3.12/site-packages/llama_cpp/lib/libggml-base.so(ggml_print_backtrace+0x21f)[0x70d13d87b14f]
/mnt/c/large_project/linux_red_heart/red_heart_env/lib/python3.12/site-packages/llama_cpp/lib/libggml-base.so(+0x2846f)[0x70d13d88c46f]
/lib/x86_64-linux-gnu/libstdc++.so.6(+0xbb0da)[0x70d1df2bb0da]
/lib/x86_64-linux-gnu/libstdc++.so.6(_ZSt10unexpectedv+0x0)[0x70d1df2a5a55]
/lib/x86_64-linux-gnu/libstdc++.so.6(+0xa592a)[0x70d1df2a592a]
/lib/x86_64-linux-gnu/libgcc_s.so.1(+0x22ce5)[0x70d254fbdce5]
/lib/x86_64-linux-gnu/libgcc_s.so.1(_Unwind_ForcedUnwind+0x130)[0x70d254fbe3c0]
/lib/x86_64-linux-gnu/libc.so.6(+0xa57a4)[0x70d2554a57a4]
/lib/x86_64-linux-gnu/libc.so.6(pthread_exit+0x42)[0x70d25549dd22]
python(PyThread_create_key+0x0)[0x4bb41d]
python[0x4a4ecf]
python(PyEval_RestoreThread+0x1e)[0x5fbdfe]
/mnt/c/large_project/linux_red_heart/red_heart_env/lib/python3.12/site-packages/torch/lib/libtorch_python.so(+0x58fde5)[0x70d22a128de5]
/mnt/c/large_project/linux_red_heart/red_heart_env/lib/python3.12/site-packages/torch/lib/libtorch_python.so(+0x5dad87)[0x70d22a173d87]
python[0x5513f8]
python(PyObject_Vectorcall+0x35)[0x549985]
python(_PyEval_EvalFrameDefault+0xadf)[0x5d6b2f]
python[0x54cacd]
python(_PyEval_EvalFrameDefault+0x4cc6)[0x5dad16]
python[0x66bca9]
/usr/lib/python3.12/lib-dynload/_asyncio.cpython-312-x86_64-linux-gnu.so(+0x9d44)[0x70d254fdfd44]
/usr/lib/python3.12/lib-dynload/_asyncio.cpython-312-x86_64-linux-gnu.so(+0x9b5b)[0x70d254fdfb5b]
python(_PyObject_MakeTpCall+0x75)[0x548f85]
python[0x6a4abc]
python[0x581bcd]
python(_PyEval_EvalFrameDefault+0x4cc6)[0x5dad16]
python[0x54cb32]
python(_PyEval_EvalFrameDefault+0x4cc6)[0x5dad16]
python[0x54cb32]
python[0x6f80dc]
python[0x6b931c]
/lib/x86_64-linux-gnu/libc.so.6(+0x9caa4)[0x70d25549caa4]
/lib/x86_64-linux-gnu/libc.so.6(+0x129c3c)[0x70d255529c3c]
terminate called without an active exception
run_learning.sh: line 240: 21636 Aborted                 (core dumped) python unified_system_main.py --mode test "$@"
[0;34m[INFO][0m 학습 시스템 정리 중...
[0;34m[INFO][0m GPU 메모리 정리...
[0;32m[SUCCESS][0m 정리 완료
