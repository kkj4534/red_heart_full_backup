name: faiss-test
channels:
  - pytorch
  - nvidia
  - conda-forge
  - defaults

dependencies:
  # Python
  - python=3.12.3
  
  # FAISS GPU (핵심)
  - faiss-gpu=1.11.0
  
  # CUDA 런타임
  - cuda-cudart=11.8.89
  - libcublas=11.11.3.6
  
  # 수학 라이브러리
  - mkl=2023.0.0
  - intel-openmp=2023.1.0
  - libblas=3.9.0
  - libcblas=3.9.0
  - liblapack=3.9.0
  - libopenblas=0.3.30
  
  # NumPy (conda 버전)
  - numpy=1.26.4
  
  # TBB (병렬 처리)
  - tbb=2021.13.0
  
  # 빌드 도구
  - setuptools=80.9.0
  - pip=25.1.1
  - wheel=0.45.1
  - packaging=25.0
  
  # 시스템 라이브러리
  - _libgcc_mutex=0.1
  - _openmp_mutex=4.5
  - libgcc-ng=15.1.0
  - libgfortran5=15.1.0
  - libgomp=15.1.0
  - libstdcxx-ng=15.1.0
  - libhwloc=2.11.2
  
  # 압축/암호화
  - bzip2=1.0.8
  - xz=5.8.1
  - zlib=1.2.13
  - ca-certificates=2025.7.14
  - openssl=3.5.1
  
  # 기타 시스템
  - ld_impl_linux-64=2.44
  - libexpat=2.7.0
  - libffi=3.4.6
  - libnsl=2.0.1
  - libsqlite=3.46.0
  - libuuid=2.38.1
  - libxcrypt=4.4.36
  - libxml2=2.13.8
  - icu=73.2
  - ncurses=6.5
  - readline=8.2
  - tk=8.6.13
  - tzdata=2025b
  
  # Python ABI
  - python_abi=3.12
  
  # pip로 설치될 패키지들 (conda와 충돌 방지)
  - pip:
    # SpaCy (conda 버전 사용)
    - spacy==3.8.7
    
    # HTTP 라이브러리 (낮은 버전 - venv와 충돌)
    - h11==0.9.0
    - h2==3.2.0
    - hpack==3.0.0
    - httpcore==0.9.1
    - httpx==0.13.3
    - hyperframe==5.2.0
    - hstspreload==2025.1.1
    - rfc3986==1.5.0
    
    # 기타 conda 전용 pip 패키지
    - chardet==3.0.4
    - idna==2.10  # conda 버전
    - PyYAML==6.0.2  # conda 버전
    - typing-extensions==4.14.1  # conda 버전
    - json-repair==0.47.6  # conda 버전
    
    # SpaCy 의존성
    - spacy-legacy==3.0.12
    - spacy-loggers==1.0.5
    - thinc==8.3.4
    - blis==1.2.1
    - catalogue==2.0.10
    - cymem==2.0.11
    - murmurhash==1.0.13
    - preshed==3.0.10
    - srsly==2.5.1
    - wasabi==1.1.3
    - weasel==0.4.1
    - confection==0.1.5
    - cloudpathlib==0.21.1
    - smart-open==7.3.0.post1
    - marisa-trie==1.2.1
    
    # 공통 의존성
    - annotated-types==0.7.0
    - certifi==2025.6.15
    - charset-normalizer==3.4.2
    - click==8.2.1
    - diskcache==5.6.3
    - Jinja2==3.1.6
    - langcodes==3.5.0
    - language-data==1.3.0
    - markdown-it-py==3.0.0
    - MarkupSafe==3.0.2
    - mdurl==0.1.2
    - pydantic==2.11.7
    - pydantic-core==2.33.2
    - Pygments==2.19.2
    - pyparsing==3.2.3
    - pytz==2025.2
    - requests==2.32.4
    - rich==14.0.0
    - shellingham==1.5.4
    - six==1.17.0
    - sniffio==1.3.1
    - typer==0.16.0
    - typing-inspection==0.4.1
    - urllib3==2.5.0
    - wrapt==1.17.2

# 환경 변수
variables:
  CUDA_HOME: /usr/local/cuda-11.8
  LD_LIBRARY_PATH: /usr/local/cuda-11.8/lib64:$LD_LIBRARY_PATH